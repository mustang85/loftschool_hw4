<!doctype html>
<html lang="en" ng-app="phoneBook">
<head>
  <meta charset="utf-8">
  <title>My HTML File</title>
  <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
  <link rel="stylesheet" href="css/main.css">
  <style>
  .ng-binding {
    /*border: 1px solid red;*/
  }
  </style>
</head>
<body>

	<div class="wrapper">
    
    <h1 class="h1">Контакты</h1>

    <div class="main">
      
      <!-- <ul>
        <li>
          <a href="#/list">list</a>
        </li>
        <li>
          <a href="#/tile">tile</a>
        </li>
        <li>
          <a href="#/card">card default</a>
        </li>
        <li>
          <a href="#/tile/card/">card user</a>
        </li>
      </ul> -->

      <ng-view></ng-view>
    </div>
  

	</div>
  <script src="bower_components/jquery/jquery.js"></script>
  <script src="bower_components/angular/angular.js"></script>
  <script src="bower_components/angular-route/angular-route.js"></script>

  <!-- <script src="js/controllers.js"></script> -->
  <script> 
      var app = angular.module('phoneBook', ['ngRoute']);

      app.config(function($routeProvider) {
        $routeProvider.when('/list', {
          templateUrl: 'views/listphone.html',
          controller: 'ListCtrl'
        })
        .when('/list/card:id', {
           templateUrl: 'views/usercard.html',
           controller: 'CardCtrl'
        })
        .when('/tile', {
          templateUrl: 'views/tilephone.html',
          controller: 'ListCtrl'
        })
        .when('/tile/card', {
          templateUrl: 'views/usercard.html',
          controller: 'CardCtrl'
        })
        .when('/list/card', {
          templateUrl: 'views/usercard.html',
          controller: 'CardCtrl'
        })
        .otherwise({redirectTo: '/card'});
        
      });

      app.factory('InboxFactory', function($http) {

        var exports = {};

        exports.getMessage = function() {
          console.log($http.get('json/phonebooks.json'));
          return $http.get('json/phonebooks.json')
              .error(function(data) {
                    console.log('здесь ошибку', data);
              });
        }

        return exports;

      });

      app.controller('ListCtrl', ['$scope','InboxFactory', function($scope,InboxFactory) {
          $scope.inputName = 'yyyy';
          
          InboxFactory.getMessage()
            .success(function(jsonData, statusCode) {
              $scope.listCards = jsonData;
          });

      }]);


      app.controller('CardCtrl', ['$scope', 'InboxFactory', function($scope,InboxFactory) {
        $scope.txt = 'text';

          InboxFactory.getMessage()
          .success(function(jsonData, statusCode) {
            $scope.uCard = jsonData;
          });

        $scope.flag = false;
        $scope.idUser = location.href.slice((location.href.lastIndexOf('/') + 7));
        console.log($scope.idUser);
      }]);

      app.directive('myCustomElement', function () {
        
        return {
          restrict: 'EA',
          scope: true,
          templateUrl: "tmpl/myCustomElement.html",
          controller: ('myCustomElementCtrl', ['$scope', 'InboxFactory', function($scope,InboxFactory) {
            InboxFactory.getMessage()
              .success(function(jsonData, statusCode) {
                $scope.messages = jsonData;
            });
            
            
          }]),
    
          link: function (scope, iElement, iAttrs) {}

       }});

      app.directive('clickMe', function () {
        return {
          restrict: 'E',
          scope: {
            title: '@'
          },
          template: "<p>Click Me Please</p>",
          link: function (scope, iElement, iAttrs) {
            scope.list = 'lf ld sa';

            iElement.bind('click', function(event) {
              console.log(scope.title);
              alert(scope.title);
              console.log(scope.list);
            });
          }

      }});

      
  </script>
</body>
</html>
